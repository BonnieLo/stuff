<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>tuple_server.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>tuple_server.c File Reference</h1>The <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> server accepts incoming TCP connections and offers clients access to the database. <a href="#_details">More...</a>
<p>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;sys/socket.h&gt;</code><br>
<code>#include &lt;arpa/inet.h&gt;</code><br>
<code>#include &lt;netinet/tcp.h&gt;</code><br>
<code>#include &lt;pthread.h&gt;</code><br>
<code>#include &lt;semaphore.h&gt;</code><br>
<code>#include &lt;malloc.h&gt;</code><br>
<code>#include &quot;<a class="el" href="tuple_8h-source.html">tuple.h</a>&quot;</code><br>

<p>
<a href="tuple__server_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structttuple.html">ttuple</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Doubly-linked list of tuples, for efficient insertions and deletions.  <a href="structttuple.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#c3692819120546eec3390925aa1ddd1c">GETLOG</a>&nbsp;&nbsp;&nbsp;if (pthread_mutex_lock(&amp;<a class="el" href="tuple__server_8c.html#54baead9ac1aa7d2d2f886956ac57c1e">log_mutex</a>)) perror(&quot;pthread_mutex_lock&quot;);</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#1ca47746196e8cf8678e20eae7202dab">YIELDLOG</a>&nbsp;&nbsp;&nbsp;if (pthread_mutex_unlock(&amp;<a class="el" href="tuple__server_8c.html#54baead9ac1aa7d2d2f886956ac57c1e">log_mutex</a>)) perror(&quot;pthread_mutex_unlock&quot;);</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#71aa2982e46f3ecc399b93887a57d999">LOGPRINTF</a>(fmt, a...)&nbsp;&nbsp;&nbsp;if (<a class="el" href="tuple_8h.html#e04e4d0edb23bd956fb72751e690ee47">logptr</a>&lt;sizeof(<a class="el" href="tuple_8h.html#01b53fb9873f8228a81dd48f00ed2f1b">logbuf</a>)-80) { <a class="el" href="tuple_8h.html#e04e4d0edb23bd956fb72751e690ee47">logptr</a> += sprintf(<a class="el" href="tuple_8h.html#01b53fb9873f8228a81dd48f00ed2f1b">logbuf</a>+<a class="el" href="tuple_8h.html#e04e4d0edb23bd956fb72751e690ee47">logptr</a>, fmt, ##a); }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#8b2f8c6dc7fdf252e7f8a07a3d98eb65">LOGTUPLE</a>(s)&nbsp;&nbsp;&nbsp;print_tuple(s);</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#cbc932e601f8257734e1c069a214c3a1">MAXNUMTHREADS</a>&nbsp;&nbsp;&nbsp;64</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#889f2659453f2cafb52b31ca2fcb7196">GETACCESS</a>&nbsp;&nbsp;&nbsp;if (pthread_mutex_lock(&amp;<a class="el" href="tuple__server_8c.html#942f07e866e794f5338e1ffe2189ed29">access_mutex</a>)) perror(&quot;mutex_lock&quot;);</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#ea602ee4d653954c7bd66125c01a464e">YIELDACCESS</a>&nbsp;&nbsp;&nbsp;if (pthread_mutex_unlock(&amp;<a class="el" href="tuple__server_8c.html#942f07e866e794f5338e1ffe2189ed29">access_mutex</a>)) perror(&quot;mutex_unlock&quot;);</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#05a5085b80affe747a590d5ba2584d70">threadfunction</a> )(void *)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#44a21c37bcc26c7923ac4817bea5fa96">print_status</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#5ce0035a6d88a1ba81e64b2cc07f63ec">print_thread_func</a> (void *varg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#a55d88a54108b4b2291f67c8fb91e950">add_tuple_to_space</a> (struct <a class="el" href="structtuple.html">tuple</a> *t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#aec3a9df2321ef796cc7a59d7bb54f30">remove_message_from_space</a> (struct <a class="el" href="structttuple.html">ttuple</a> *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#a5770db481d4c5d317312a0e51f208a4">kill_this_thread</a> (struct <a class="el" href="structcontext.html">context</a> *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#92c1cc677332c95c12396c32407b1170">handle_get_read</a> (struct <a class="el" href="structcontext.html">context</a> *ctx, struct <a class="el" href="structtuple.html">tuple</a> *s, int remove, int blocking)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#b91a681a943331110831fe7cc85da62b">handle_replace</a> (struct <a class="el" href="structcontext.html">context</a> *ctx, struct <a class="el" href="structtuple.html">tuple</a> *template, struct <a class="el" href="structtuple.html">tuple</a> *replacement)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#d42739c5215a1c93469ec937aa9da25c">handle_dump_count_space</a> (struct <a class="el" href="structcontext.html">context</a> *ctx, int dump)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#f21791011e83a44deaa5e8b35e552476">client_thread_func</a> (void *varg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#54baead9ac1aa7d2d2f886956ac57c1e">log_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structttuple.html">ttuple</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#c221c934856e24234a1677f4c52c7efd">first_message</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structttuple.html">ttuple</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#d39aa728c2c3734e8e22acb5d24a815e">last_message</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structcontext.html">context</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#7f65c3ef43d59f04f0339bdd8ee664ca">client_list</a> [MAXNUMTHREADS]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#96f9ddec095d36009366eb795e23b378">status_list</a> [MAXNUMTHREADS+1]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#942f07e866e794f5338e1ffe2189ed29">access_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#f77d3f86e10ccb427a3bf2f9e7c2acd3">blocked_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static pthread_cond_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuple__server_8c.html#719f33365fcd54d5a851217e1c5aef9e">blocked_cond</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> server accepts incoming TCP connections and offers clients access to the database.
<p>
The <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> server is responsible for remaining stable while clients misbehave, and making sure that client operations are atomic. Client misbehavior can include things like badly-formed requests and dropped network sockets.
<p>Definition in file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="889f2659453f2cafb52b31ca2fcb7196"></a><!-- doxytag: member="tuple_server.c::GETACCESS" ref="889f2659453f2cafb52b31ca2fcb7196" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GETACCESS&nbsp;&nbsp;&nbsp;if (pthread_mutex_lock(&amp;<a class="el" href="tuple__server_8c.html#942f07e866e794f5338e1ffe2189ed29">access_mutex</a>)) perror(&quot;mutex_lock&quot;);          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00148">148</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00430">handle_dump_count_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c3692819120546eec3390925aa1ddd1c"></a><!-- doxytag: member="tuple_server.c::GETLOG" ref="c3692819120546eec3390925aa1ddd1c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GETLOG&nbsp;&nbsp;&nbsp;if (pthread_mutex_lock(&amp;<a class="el" href="tuple__server_8c.html#54baead9ac1aa7d2d2f886956ac57c1e">log_mutex</a>)) perror(&quot;pthread_mutex_lock&quot;);          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00090">90</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>, and <a class="el" href="tuple__server_8c-source.html#l00268">kill_this_thread()</a>.</p>

</div>
</div><p>
<a class="anchor" name="71aa2982e46f3ecc399b93887a57d999"></a><!-- doxytag: member="tuple_server.c::LOGPRINTF" ref="71aa2982e46f3ecc399b93887a57d999" args="(fmt, a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOGPRINTF          </td>
          <td>(</td>
          <td class="paramtype">fmt,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">a...&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;if (<a class="el" href="tuple_8h.html#e04e4d0edb23bd956fb72751e690ee47">logptr</a>&lt;sizeof(<a class="el" href="tuple_8h.html#01b53fb9873f8228a81dd48f00ed2f1b">logbuf</a>)-80) { <a class="el" href="tuple_8h.html#e04e4d0edb23bd956fb72751e690ee47">logptr</a> += sprintf(<a class="el" href="tuple_8h.html#01b53fb9873f8228a81dd48f00ed2f1b">logbuf</a>+<a class="el" href="tuple_8h.html#e04e4d0edb23bd956fb72751e690ee47">logptr</a>, fmt, ##a); }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00096">96</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>, and <a class="el" href="tuple__server_8c-source.html#l00268">kill_this_thread()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8b2f8c6dc7fdf252e7f8a07a3d98eb65"></a><!-- doxytag: member="tuple_server.c::LOGTUPLE" ref="8b2f8c6dc7fdf252e7f8a07a3d98eb65" args="(s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOGTUPLE          </td>
          <td>(</td>
          <td class="paramtype">s&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;print_tuple(s);</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00098">98</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>.</p>

</div>
</div><p>
<a class="anchor" name="cbc932e601f8257734e1c069a214c3a1"></a><!-- doxytag: member="tuple_server.c::MAXNUMTHREADS" ref="cbc932e601f8257734e1c069a214c3a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXNUMTHREADS&nbsp;&nbsp;&nbsp;64          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00125">125</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>, and <a class="el" href="tuple__server_8c-source.html#l00168">print_status()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ea602ee4d653954c7bd66125c01a464e"></a><!-- doxytag: member="tuple_server.c::YIELDACCESS" ref="ea602ee4d653954c7bd66125c01a464e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define YIELDACCESS&nbsp;&nbsp;&nbsp;if (pthread_mutex_unlock(&amp;<a class="el" href="tuple__server_8c.html#942f07e866e794f5338e1ffe2189ed29">access_mutex</a>)) perror(&quot;mutex_unlock&quot;);          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00150">150</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00430">handle_dump_count_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1ca47746196e8cf8678e20eae7202dab"></a><!-- doxytag: member="tuple_server.c::YIELDLOG" ref="1ca47746196e8cf8678e20eae7202dab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define YIELDLOG&nbsp;&nbsp;&nbsp;if (pthread_mutex_unlock(&amp;<a class="el" href="tuple__server_8c.html#54baead9ac1aa7d2d2f886956ac57c1e">log_mutex</a>)) perror(&quot;pthread_mutex_unlock&quot;);          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00092">92</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>, and <a class="el" href="tuple__server_8c-source.html#l00268">kill_this_thread()</a>.</p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="05a5085b80affe747a590d5ba2584d70"></a><!-- doxytag: member="tuple_server.c::threadfunction" ref="05a5085b80affe747a590d5ba2584d70" args=")(void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void*(* <a class="el" href="tuple__server_8c.html#05a5085b80affe747a590d5ba2584d70">threadfunction</a>)(void *)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00683">683</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a55d88a54108b4b2291f67c8fb91e950"></a><!-- doxytag: member="tuple_server.c::add_tuple_to_space" ref="a55d88a54108b4b2291f67c8fb91e950" args="(struct tuple *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void add_tuple_to_space           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtuple.html">tuple</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When we add a <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> to the space, we unblock all the clients who are waiting for tuples, so they can check and see if this is the one they want.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00198">198</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00164">blocked_cond</a>, <a class="el" href="tuple__server_8c-source.html#l00163">blocked_mutex</a>, <a class="el" href="tuple__server_8c-source.html#l00148">GETACCESS</a>, <a class="el" href="tuple__server_8c-source.html#l00107">ttuple::next</a>, <a class="el" href="tuple__server_8c-source.html#l00108">ttuple::previous</a>, <a class="el" href="tuple__server_8c-source.html#l00106">ttuple::tuple</a>, and <a class="el" href="tuple__server_8c-source.html#l00150">YIELDACCESS</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f21791011e83a44deaa5e8b35e552476"></a><!-- doxytag: member="tuple_server.c::client_thread_func" ref="f21791011e83a44deaa5e8b35e552476" args="(void *varg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* client_thread_func           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>varg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When a client makes a connection, find out what it wants, and do that operation.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00510">510</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00131">client_list</a>, <a class="el" href="tuple_8h-source.html#l00128">COUNT</a>, <a class="el" href="tuple_8h-source.html#l00127">DUMP</a>, <a class="el" href="tuple_8h-source.html#l00123">GET</a>, <a class="el" href="tuple_8h-source.html#l00125">GET_NB</a>, <a class="el" href="tuple__server_8c-source.html#l00090">GETLOG</a>, <a class="el" href="tuple__server_8c-source.html#l00430">handle_dump_count_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>, <a class="el" href="tuple_8h-source.html#l00258">context::id</a>, <a class="el" href="tuple__server_8c-source.html#l00268">kill_this_thread()</a>, <a class="el" href="tuple_8h-source.html#l00129">LOG</a>, <a class="el" href="tuple_8c-source.html#l00089">logbuf</a>, <a class="el" href="tuple__server_8c-source.html#l00096">LOGPRINTF</a>, <a class="el" href="tuple_8c-source.html#l00093">logptr</a>, <a class="el" href="tuple__server_8c-source.html#l00098">LOGTUPLE</a>, <a class="el" href="tuple_8h-source.html#l00262">context::peername</a>, <a class="el" href="tuple_8h-source.html#l00122">PUT</a>, <a class="el" href="tuple_8h-source.html#l00124">READ</a>, <a class="el" href="tuple_8h-source.html#l00126">READ_NB</a>, <a class="el" href="tuple_8c-source.html#l00577">recv_chunk()</a>, <a class="el" href="tuple_8c-source.html#l00626">recv_tuple()</a>, <a class="el" href="tuple_8h-source.html#l00130">REPLACE</a>, <a class="el" href="tuple_8h-source.html#l00106">SHUTDOWN_SOCKET</a>, <a class="el" href="tuple_8h-source.html#l00271">context::sock</a>, <a class="el" href="tuple__server_8c-source.html#l00132">status_list</a>, <a class="el" href="tuple_8h-source.html#l00277">context::thr</a>, and <a class="el" href="tuple__server_8c-source.html#l00092">YIELDLOG</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d42739c5215a1c93469ec937aa9da25c"></a><!-- doxytag: member="tuple_server.c::handle_dump_count_space" ref="d42739c5215a1c93469ec937aa9da25c" args="(struct context *ctx, int dump)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_dump_count_space           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcontext.html">context</a> *&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dump</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When a client requests a dump or a count of the <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> space, handle that here.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00430">430</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00148">GETACCESS</a>, <a class="el" href="tuple_8h-source.html#l00238">tuple_list::next</a>, <a class="el" href="tuple__server_8c-source.html#l00107">ttuple::next</a>, <a class="el" href="tuple_8c-source.html#l00577">recv_chunk()</a>, <a class="el" href="tuple_8c-source.html#l00626">recv_tuple()</a>, <a class="el" href="tuple_8c-source.html#l00471">send_chunk()</a>, <a class="el" href="tuple_8c-source.html#l00501">send_tuple()</a>, <a class="el" href="tuple_8h-source.html#l00239">tuple_list::tup</a>, <a class="el" href="tuple__server_8c-source.html#l00106">ttuple::tuple</a>, <a class="el" href="tuple_8c-source.html#l00396">tuples_match()</a>, and <a class="el" href="tuple__server_8c-source.html#l00150">YIELDACCESS</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="92c1cc677332c95c12396c32407b1170"></a><!-- doxytag: member="tuple_server.c::handle_get_read" ref="92c1cc677332c95c12396c32407b1170" args="(struct context *ctx, struct tuple *s, int remove, int blocking)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_get_read           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcontext.html">context</a> *&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtuple.html">tuple</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>remove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>blocking</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle GETs and READs, both blocking and non-blocking.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00294">294</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00164">blocked_cond</a>, <a class="el" href="tuple__server_8c-source.html#l00163">blocked_mutex</a>, <a class="el" href="tuple__server_8c-source.html#l00131">client_list</a>, <a class="el" href="tuple_8h-source.html#l00052">DBGPRINTF</a>, <a class="el" href="tuple_8c-source.html#l00381">destroy_tuple()</a>, <a class="el" href="tuple__server_8c-source.html#l00148">GETACCESS</a>, <a class="el" href="tuple__server_8c-source.html#l00090">GETLOG</a>, <a class="el" href="tuple_8h-source.html#l00258">context::id</a>, <a class="el" href="tuple__server_8c-source.html#l00096">LOGPRINTF</a>, <a class="el" href="tuple__server_8c-source.html#l00098">LOGTUPLE</a>, <a class="el" href="tuple__server_8c-source.html#l00107">ttuple::next</a>, <a class="el" href="tuple_8h-source.html#l00262">context::peername</a>, <a class="el" href="tuple_8h-source.html#l00057">PRINTF</a>, <a class="el" href="tuple__server_8c-source.html#l00239">remove_message_from_space()</a>, <a class="el" href="tuple_8c-source.html#l00471">send_chunk()</a>, <a class="el" href="tuple_8c-source.html#l00501">send_tuple()</a>, <a class="el" href="tuple_8h-source.html#l00271">context::sock</a>, <a class="el" href="tuple__server_8c-source.html#l00132">status_list</a>, <a class="el" href="tuple__server_8c-source.html#l00106">ttuple::tuple</a>, <a class="el" href="tuple_8c-source.html#l00396">tuples_match()</a>, <a class="el" href="tuple__server_8c-source.html#l00150">YIELDACCESS</a>, and <a class="el" href="tuple__server_8c-source.html#l00092">YIELDLOG</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b91a681a943331110831fe7cc85da62b"></a><!-- doxytag: member="tuple_server.c::handle_replace" ref="b91a681a943331110831fe7cc85da62b" args="(struct context *ctx, struct tuple *template, struct tuple *replacement)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_replace           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcontext.html">context</a> *&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtuple.html">tuple</a> *&nbsp;</td>
          <td class="paramname"> <em>template</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtuple.html">tuple</a> *&nbsp;</td>
          <td class="paramname"> <em>replacement</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle REPLACE. This operation will not block.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00385">385</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00131">client_list</a>, <a class="el" href="tuple_8c-source.html#l00381">destroy_tuple()</a>, <a class="el" href="tuple__server_8c-source.html#l00148">GETACCESS</a>, <a class="el" href="tuple__server_8c-source.html#l00090">GETLOG</a>, <a class="el" href="tuple_8h-source.html#l00258">context::id</a>, <a class="el" href="tuple__server_8c-source.html#l00096">LOGPRINTF</a>, <a class="el" href="tuple__server_8c-source.html#l00098">LOGTUPLE</a>, <a class="el" href="tuple__server_8c-source.html#l00107">ttuple::next</a>, <a class="el" href="tuple_8h-source.html#l00262">context::peername</a>, <a class="el" href="tuple__server_8c-source.html#l00239">remove_message_from_space()</a>, <a class="el" href="tuple_8h-source.html#l00130">REPLACE</a>, <a class="el" href="tuple_8h-source.html#l00106">SHUTDOWN_SOCKET</a>, <a class="el" href="tuple_8h-source.html#l00271">context::sock</a>, <a class="el" href="tuple__server_8c-source.html#l00132">status_list</a>, <a class="el" href="tuple__server_8c-source.html#l00106">ttuple::tuple</a>, <a class="el" href="tuple_8c-source.html#l00396">tuples_match()</a>, <a class="el" href="tuple__server_8c-source.html#l00150">YIELDACCESS</a>, and <a class="el" href="tuple__server_8c-source.html#l00092">YIELDLOG</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a5770db481d4c5d317312a0e51f208a4"></a><!-- doxytag: member="tuple_server.c::kill_this_thread" ref="a5770db481d4c5d317312a0e51f208a4" args="(struct context *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kill_this_thread           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcontext.html">context</a> *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00268">268</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00131">client_list</a>, <a class="el" href="tuple__server_8c-source.html#l00090">GETLOG</a>, <a class="el" href="tuple_8h-source.html#l00258">context::id</a>, <a class="el" href="tuple__server_8c-source.html#l00096">LOGPRINTF</a>, <a class="el" href="tuple_8h-source.html#l00262">context::peername</a>, <a class="el" href="tuple_8h-source.html#l00271">context::sock</a>, <a class="el" href="tuple__server_8c-source.html#l00132">status_list</a>, <a class="el" href="tuple_8h-source.html#l00277">context::thr</a>, and <a class="el" href="tuple__server_8c-source.html#l00092">YIELDLOG</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="tuple_server.c::main" ref="0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set up a socket to listen for incoming requests. When one arrives, start a pthread to handle it, and run <a class="el" href="tuple__server_8c.html#f21791011e83a44deaa5e8b35e552476">client_thread_func()</a>.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00690">690</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00147">access_mutex</a>, <a class="el" href="tuple__server_8c-source.html#l00164">blocked_cond</a>, <a class="el" href="tuple__server_8c-source.html#l00163">blocked_mutex</a>, <a class="el" href="tuple__server_8c-source.html#l00131">client_list</a>, <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple_8h-source.html#l00095">EXIT</a>, <a class="el" href="tuple_8c-source.html#l00079">i_am_server</a>, <a class="el" href="tuple_8h-source.html#l00258">context::id</a>, <a class="el" href="tuple__server_8c-source.html#l00089">log_mutex</a>, <a class="el" href="tuple__server_8c-source.html#l00125">MAXNUMTHREADS</a>, <a class="el" href="tuple__server_8c-source.html#l00182">print_thread_func()</a>, <a class="el" href="tuple_8h-source.html#l00271">context::sock</a>, <a class="el" href="tuple__server_8c-source.html#l00132">status_list</a>, and <a class="el" href="tuple_8h-source.html#l00277">context::thr</a>.</p>

</div>
</div><p>
<a class="anchor" name="44a21c37bcc26c7923ac4817bea5fa96"></a><!-- doxytag: member="tuple_server.c::print_status" ref="44a21c37bcc26c7923ac4817bea5fa96" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void print_status           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00168">168</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00125">MAXNUMTHREADS</a>, and <a class="el" href="tuple__server_8c-source.html#l00132">status_list</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00182">print_thread_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5ce0035a6d88a1ba81e64b2cc07f63ec"></a><!-- doxytag: member="tuple_server.c::print_thread_func" ref="5ce0035a6d88a1ba81e64b2cc07f63ec" args="(void *varg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void print_thread_func           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>varg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00182">182</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00168">print_status()</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="aec3a9df2321ef796cc7a59d7bb54f30"></a><!-- doxytag: member="tuple_server.c::remove_message_from_space" ref="aec3a9df2321ef796cc7a59d7bb54f30" args="(struct ttuple *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_message_from_space           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structttuple.html">ttuple</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tuples are kept in a doubly-linked list, so there's a lot of pointer-hacking here.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00239">239</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>References <a class="el" href="tuple__server_8c-source.html#l00107">ttuple::next</a>, and <a class="el" href="tuple__server_8c-source.html#l00108">ttuple::previous</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="942f07e866e794f5338e1ffe2189ed29"></a><!-- doxytag: member="tuple_server.c::access_mutex" ref="942f07e866e794f5338e1ffe2189ed29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="tuple__server_8c.html#942f07e866e794f5338e1ffe2189ed29">access_mutex</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Semaphore to make sure that all <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> operations are atomic. Each client finishes his operation before the next guy is allowed to begin.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00147">147</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="719f33365fcd54d5a851217e1c5aef9e"></a><!-- doxytag: member="tuple_server.c::blocked_cond" ref="719f33365fcd54d5a851217e1c5aef9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t <a class="el" href="tuple__server_8c.html#719f33365fcd54d5a851217e1c5aef9e">blocked_cond</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00164">164</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f77d3f86e10ccb427a3bf2f9e7c2acd3"></a><!-- doxytag: member="tuple_server.c::blocked_mutex" ref="f77d3f86e10ccb427a3bf2f9e7c2acd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="tuple__server_8c.html#f77d3f86e10ccb427a3bf2f9e7c2acd3">blocked_mutex</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When threads/clients block, they wait for this semaphore.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00163">163</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00198">add_tuple_to_space()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, and <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7f65c3ef43d59f04f0339bdd8ee664ca"></a><!-- doxytag: member="tuple_server.c::client_list" ref="7f65c3ef43d59f04f0339bdd8ee664ca" args="[MAXNUMTHREADS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcontext.html">context</a> <a class="el" href="tuple__server_8c.html#7f65c3ef43d59f04f0339bdd8ee664ca">client_list</a>[MAXNUMTHREADS]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maintain a list of the clients currently trying to access <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> space. Keep track of a pthread and a socket for each one.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00131">131</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>, <a class="el" href="tuple__server_8c-source.html#l00268">kill_this_thread()</a>, and <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c221c934856e24234a1677f4c52c7efd"></a><!-- doxytag: member="tuple_server.c::first_message" ref="c221c934856e24234a1677f4c52c7efd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structttuple.html">ttuple</a>* <a class="el" href="tuple__server_8c.html#c221c934856e24234a1677f4c52c7efd">first_message</a> = NULL<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the first <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> in <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> space. When there is a GET or READ operation, the search begins with the first <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a>.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00115">115</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="d39aa728c2c3734e8e22acb5d24a815e"></a><!-- doxytag: member="tuple_server.c::last_message" ref="d39aa728c2c3734e8e22acb5d24a815e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structttuple.html">ttuple</a>* <a class="el" href="tuple__server_8c.html#d39aa728c2c3734e8e22acb5d24a815e">last_message</a> = NULL<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the last <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> in <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> space. When there is a PUT operation, the <a class="el" href="structtuple.html" title="An ordered sequence of data values: integers, floats, strings. If this is a template...">tuple</a> is put at the end of the list.
<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00121">121</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="54baead9ac1aa7d2d2f886956ac57c1e"></a><!-- doxytag: member="tuple_server.c::log_mutex" ref="54baead9ac1aa7d2d2f886956ac57c1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="tuple__server_8c.html#54baead9ac1aa7d2d2f886956ac57c1e">log_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00089">89</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="96f9ddec095d36009366eb795e23b378"></a><!-- doxytag: member="tuple_server.c::status_list" ref="96f9ddec095d36009366eb795e23b378" args="[MAXNUMTHREADS+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="tuple__server_8c.html#96f9ddec095d36009366eb795e23b378">status_list</a>[MAXNUMTHREADS+1]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="tuple__server_8c-source.html#l00132">132</a> of file <a class="el" href="tuple__server_8c-source.html">tuple_server.c</a>.</p>

<p>Referenced by <a class="el" href="tuple__server_8c-source.html#l00510">client_thread_func()</a>, <a class="el" href="tuple__server_8c-source.html#l00294">handle_get_read()</a>, <a class="el" href="tuple__server_8c-source.html#l00385">handle_replace()</a>, <a class="el" href="tuple__server_8c-source.html#l00268">kill_this_thread()</a>, <a class="el" href="tuple__server_8c-source.html#l00690">main()</a>, and <a class="el" href="tuple__server_8c-source.html#l00168">print_status()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Aug 5 07:43:02 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
